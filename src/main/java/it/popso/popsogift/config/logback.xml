<?xml version="1.0" encoding="UTF-8" ?>
<configuration>

        <appender name="ConsoleAppender" class="ch.qos.logback.core.ConsoleAppender">
                <encoder>
                        <pattern>
                                %d{yyyy-MM-dd HH:mm:ss.SSS} ip_address=%X{ip_address} banca=%X{banca} layer=%X{layer} nodo=%X{nodo} idConversazione=%X{idConversazione} codice_applicazione_chiamante=%X{codiceApplicazioneChiamante} codice_operazione=%X{codiceOperazione} codiceApplicazione=%X{codiceApplicazione} codiceCanale=%X{codiceCanale} codiceIstituto=%X{codiceIstituto} codiceFilialeContabile=%X{codiceFilialeContabile} codiceDipendenza=%X{codiceDipendenza}  [%thread] %c %L [%p] %m%n
                        </pattern>
                </encoder>
        </appender>

        <appender name="TraceFileLogAppender" class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>log/popsogift-trace.log</file>
                <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
                        <!-- rollover daily -->
                        <!-- <fileNamePattern>${jboss.server.log.dir}/ApinexipService.%d{yyyy-MM-dd}.%i.log</fileNamePattern> -->
                        <fileNamePattern>jboss/server/logs/trace.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
                        <maxFileSize>75MB</maxFileSize>
                        <maxHistory>5</maxHistory>
                        <totalSizeCap>75MB</totalSizeCap>
                </rollingPolicy>
                <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
                        <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS}  ip_address=%X{ip_address} banca=%X{banca} layer=%X{layer} nodo=%X{nodo} idConversazione=%X{idConversazione} codice_applicazione_chiamante=%X{codiceApplicazioneChiamante} codice_operazione=%X{codiceOperazione} codiceApplicazione=%X{codiceApplicazione} codiceCanale=%X{codiceCanale} codiceIstituto=%X{codiceIstituto} codiceFilialeContabile=%X{codiceFilialeContabile} codiceDipendenza=%X{codiceDipendenza} [%thread] %c %L [%p] %m%n</pattern>
                </encoder>
        </appender>

        <appender name="AuditFileLogAppender" class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>log/popsogift-audit.log</file>
                <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
                        <!-- rollover daily -->
                        <!-- <fileNamePattern>${jboss.server.log.dir}/ApinexipService.%d{yyyy-MM-dd}.%i.log</fileNamePattern> -->
                        <fileNamePattern>jboss/server/logs/audit.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
                        <maxFileSize>75MB</maxFileSize>
                        <maxHistory>5</maxHistory>
                        <totalSizeCap>75MB</totalSizeCap>
                </rollingPolicy>
                <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
                        <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS}   ip_address=%X{ip_address} id_cliente=%X{id_cliente} tipo_rapporto=%X{tipo_rapporto} num_rapporto=%X{num_rapporto} filiale_rapporto=%X{filiale_rapporto} divisa_rapporto=%X{divisa_rapporto} canale=%X{canale} idConversazione=%X{idConversazione} [%thread] %c %L [%p] %m%n</pattern>
                </encoder>
        </appender>

        <appender name="SecurityFileLogAppender" class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>log/popsogift-security.log</file>
                <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
                        <!-- rollover daily -->
                        <!-- <fileNamePattern>${jboss.server.log.dir}/ApinexipService.%d{yyyy-MM-dd}.%i.log</fileNamePattern> -->
                        <fileNamePattern>jboss/server/logs/security.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
                        <maxFileSize>75MB</maxFileSize>
                        <maxHistory>5</maxHistory>
                        <totalSizeCap>75MB</totalSizeCap>
                </rollingPolicy>
                <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
                        <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS}   ip_address=%X{ip_address} banca=%X{banca} nodo=%X{nodo} id_sessione=%X{id_sessione} idConversazione=%X{idConversazione} [%thread] %c %L [%p] %m%n</pattern>
                </encoder>
        </appender>

        <appender name="PerformanceFileLogAppender" class="ch.qos.logback.core.rolling.RollingFileAppender">
                <file>log/popsogift-perf.log</file>
                <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
                        <!-- rollover daily -->
                        <!-- <fileNamePattern>${jboss.server.log.dir}/ApinexipService.%d{yyyy-MM-dd}.%i.log</fileNamePattern> -->
                        <fileNamePattern>jboss/server/logs/perf.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
                        <maxFileSize>75MB</maxFileSize>
                        <maxHistory>5</maxHistory>
                        <totalSizeCap>75MB</totalSizeCap>
                </rollingPolicy>
                <encoder>
                        <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} nodo=%X{nodo} idConversazione=%X{idConversazione} [%thread] %c %L [%p] %m%n</pattern>
                </encoder>
        </appender>

        <logger name="AUDIT" additivity="false">
                <appender-ref ref="AuditFileLogAppender" />
                <appender-ref ref="ConsoleAppender" />
        </logger>

        <logger name="SECURITY" additivity="false">
                <appender-ref ref="SecurityFileLogAppender" />
                <appender-ref ref="ConsoleAppender" />
        </logger>

        <logger name="PERFORMANCE_LOG"  level="INFO" additivity="false">
                <appender-ref ref="PerformanceFileLogAppender" />
                <appender-ref ref="ConsoleAppender" />
        </logger>

        <logger name="it.popso.popsodoc.popsogift.endpoints">
                <level value="INFO" />
        </logger>
        <logger name="WS_IN_LOG" level="INFO" additivity="false">
                <appender-ref ref="TraceFileLogAppender" />
        </logger>
        <logger name="WS_OUT_LOG" level="INFO" additivity="false">
                <appender-ref ref="TraceFileLogAppender" />
        </logger>
        <root level="info">
                <appender-ref ref="TraceFileLogAppender" />
                <appender-ref ref="ConsoleAppender" />
        </root>

</configuration>